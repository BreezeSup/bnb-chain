name: Create 50 Custom Issues

on:
  workflow_dispatch:

permissions:
  contents: read
  issues: write

jobs:
  post_issues:
    runs-on: ubuntu-latest

    steps:
      - name: Post 50 Customized Issues with Metadata
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const issues = [
              { title: "ğŸ› Bug: Validator slashing not triggering", body: "Some validators are exhibiting malicious behavior without being slashed. Investigate slashing logic and missed triggers.", labels: ["bug", "staking"] },
              { title: "ğŸ“ˆ Feature: Cross-chain staking support", body: "Explore adding staking features that interact with other chains via BNB Chain bridges.", labels: ["feature", "staking"] },
              { title: "ğŸ” Bug: Transaction receipts missing logs", body: "Certain transaction receipts return empty or incomplete log fields. This affects dApp functionality.", labels: ["bug", "logs"] },
              { title: "ğŸ“˜ Docs: Improve gas fee calculation guide", body: "Current docs lack detailed examples of gas estimation. Add sample transactions and edge cases.", labels: ["documentation", "gas"] },
              { title: "ğŸ’¡ Feature: Validator reputation dashboard", body: "Implement a dashboard displaying validator uptime, missed blocks, and slashing events.", labels: ["feature", "dashboard"] },
              { title: "ğŸ› Bug: Wallet disconnect on page refresh", body: "Web3 wallets like MetaMask disconnect after a hard page reload. Restore connection state from cache.", labels: ["bug", "wallet"] },
              { title: "ğŸ§ª Test: Add unit tests for block propagation", body: "Write tests for block propagation speed and consistency under high throughput.", labels: ["testing", "performance"] },
              { title: "ğŸ“‰ Bug: Delayed block finality during congestion", body: "Blocks take longer to finalize during heavy load. Profile consensus behavior under duress.", labels: ["bug", "consensus"] },
              { title: "ğŸ” Feature: Native multisig contract tooling", body: "Add official tools for deploying and interacting with multisig contracts on BNB Chain.", labels: ["feature", "security"] },
              { title: "ğŸ§° Chore: Remove deprecated CLI flags", body: "Several CLI options are no longer supported. Clean up flag parsing and update help menu.", labels: ["chore", "cleanup"] },
              { title: "ğŸ“Š Feature: Real-time network health metrics", body: "Implement a dashboard for TPS, gas usage, pending tx, and node status.", labels: ["feature", "monitoring"] },
              { title: "ğŸ”Œ Bug: WebSocket disconnects on mobile", body: "WebSocket connections drop more frequently on mobile browsers. Investigate reconnection logic.", labels: ["bug", "mobile"] },
              { title: "âš ï¸ Bug: Tokens with 0 decimals fail transfers", body: "ERC20 tokens with 0 decimal precision error during transfer execution. Validate token config handling.", labels: ["bug", "token"] },
              { title: "ğŸ” Feature: Block explorer filter by validator", body: "Add validator address filter to explore their proposed blocks and transactions.", labels: ["feature", "explorer"] },
              { title: "ğŸ›‘ Bug: Faucet rate limiting bypassable", body: "Testnet faucet can be drained via bots. Enforce stricter IP-based rate limits.", labels: ["bug", "testnet"] },
              { title: "ğŸ”§ Feature: Upgrade to latest Geth version", body: "Upgrade the BNB Chain client to the latest Geth base and test for compatibility.", labels: ["feature", "upgrade"] },
              { title: "ğŸ’¬ Bug: Events not firing for token approval", body: "Approve transactions are missing the Approval event in some edge cases.", labels: ["bug", "event"] },
              { title: "ğŸ§¹ Chore: Clean up outdated genesis references", body: "References to old genesis hashes still appear in scripts/docs. Replace with current versions.", labels: ["chore", "docs"] },
              { title: "ğŸ“¦ Feature: Batch transaction support in RPC", body: "Allow bundling of multiple transactions into one RPC call for efficiency.", labels: ["feature", "rpc"] },
              { title: "ğŸ”„ Feature: Snapshot download optimization", body: "Current snapshot sync takes too long. Compress or segment to speed up initial sync.", labels: ["feature", "sync"] },
              { title: "ğŸ’¸ Bug: Gas refund not applied on revert", body: "Transactions that revert should refund unused gas, but often donâ€™t. Audit gas accounting.", labels: ["bug", "gas"] },
              { title: "ğŸ§‘â€ğŸ’» Docs: Validator node setup tutorial outdated", body: "Validator setup guide is missing required Geth flags and peer info. Refresh instructions.", labels: ["documentation", "validator"] },
              { title: "ğŸŒ Feature: Add GraphQL support to node", body: "Allow GraphQL queries in addition to REST and JSON-RPC.", labels: ["feature", "graphql"] },
              { title: "ğŸ—ƒï¸ Feature: Historical gas price API", body: "Provide gas price history endpoint for dApp fee estimation models.", labels: ["feature", "api"] },
              { title: "ğŸ”’ Bug: Contract reentrancy on specific opcodes", body: "Some contract patterns bypass reentrancy guards under rare conditions.", labels: ["bug", "security"] },
              { title: "ğŸ§¾ Feature: Transaction audit trail via hash", body: "Add feature to trace txs from contract emit to final state via tx hash.", labels: ["feature", "tracing"] },
              { title: "ğŸ“‚ Bug: Block archive missing tx receipts", body: "Old archived blocks are missing some tx receipts in logs. Regenerate with complete state.", labels: ["bug", "archive"] },
              { title: "ğŸ”” Feature: Push alerts for tx failures", body: "Allow users/devs to receive webhooks or push notifications on tx failure.", labels: ["feature", "alerts"] },
              { title: "ğŸ“‰ Bug: Chain rollback after double-sign", body: "Observed fork/rollback caused by validator double-signing. Patch consensus logic.", labels: ["bug", "consensus"] },
              { title: "ğŸŒ Feature: Regional RPC endpoint suggestions", body: "Improve UX by suggesting regional RPCs to reduce latency.", labels: ["feature", "rpc"] },
              { title: "ğŸ’¬ Bug: MetaMask disconnects intermittently", body: "MetaMask connection breaks when switching networks repeatedly. Add auto-reconnect logic.", labels: ["bug", "wallet"] },
              { title: "ğŸ–¼ï¸ Feature: NFT metadata fetch improvements", body: "NFTs with IPFS URIs load slowly or fail. Optimize resolver behavior and retries.", labels: ["feature", "nft"] },
              { title: "ğŸ“¤ Bug: Pending transactions stuck in mempool", body: "Some txs remain pending indefinitely. Add garbage collection for stale mempool entries.", labels: ["bug", "mempool"] },
              { title: "ğŸ“„ Docs: RPC error code list incomplete", body: "Add missing error codes for edge cases like invalid nonce, underpriced tx.", labels: ["documentation", "rpc"] },
              { title: "ğŸ§ª Test: Add fork scenario unit tests", body: "Add automated tests for fork resolution under simultaneous block proposals.", labels: ["testing", "consensus"] },
              { title: "ğŸŒ Feature: Browser wallet connect fallback", body: "Enable fallback UI when injected wallet is not detected, suggesting compatible wallets.", labels: ["feature", "wallet"] },
              { title: "ğŸ“œ Bug: Smart contract source not displaying", body: "Source verification fails even with correct metadata JSON. Fix verification path logic.", labels: ["bug", "contract"] },
              { title: "ğŸ§° Feature: Dev tools integration with Remix", body: "Add ability to deploy to BNB Chain testnet directly from Remix IDE.", labels: ["feature", "developer"] },
              { title: "ğŸ”— Feature: Bridge status endpoint", body: "Create an endpoint that shows bridge status (paused, fees, queues) for user apps.", labels: ["feature", "bridge"] },
              { title: "ğŸ“› Bug: Contract names clash during deployment", body: "Contracts with same name but different hashes are overwritten. Add name+hash validation.", labels: ["bug", "deployment"] },
              { title: "ğŸ“ˆ Feature: Epoch-based staking rewards view", body: "Add a dashboard that visualizes staking rewards per epoch per validator.", labels: ["feature", "staking"] },
              { title: "ğŸ§¹ Chore: Remove unused contract ABIs", body: "Several old ABIs are not referenced. Clean up to reduce bundle size.", labels: ["chore", "contracts"] },
              { title: "ğŸ“‰ Bug: Gas estimation too conservative", body: "Gas estimation function returns overly padded values for simple transfers.", labels: ["bug", "gas"] },
              { title: "ğŸ—‚ï¸ Feature: Block explorer tag-based filtering", body: "Enable filtering by token standards, such as BEP-20, NFT, bridge tokens.", labels: ["feature", "explorer"] },
              { title: "ğŸ“§ Feature: Email alerts for missed blocks", body: "Allow validator operators to receive email alerts for missed block proposals.", labels: ["feature", "notifications"] },
              { title: "ğŸ§‘â€ğŸ’¼ Docs: Add guide for multisig wallet usage", body: "Beginner-friendly guide for setting up and managing a multisig on BNB Chain.", labels: ["documentation", "wallet"] },
              { title: "ğŸš« Bug: Account nonce mismatch during rapid tx", body: "Quick successive transactions occasionally throw nonce mismatch errors.", labels: ["bug", "transaction"] },
              { title: "ğŸ–¼ï¸ Feature: Preview NFT in wallet popup", body: "Enhance wallet UI to show preview of NFT metadata when hovering over asset entry.", labels: ["feature", "nft"] },
              { title: "ğŸ“Š Feature: Top gas burners chart", body: "Add chart to explorer showing top accounts by total gas burned per week.", labels: ["feature", "analytics"] },
              { title: "ğŸ”§ Feature: Geth snapshot sync toggle", body: "Expose a toggle to disable snapshot sync on validator node boot.", labels: ["feature", "sync"] }
            ];

            const milestoneTitle = "v1.0";
            const assignees = ["BreezeSup"];

            const { data: milestones } = await github.rest.issues.listMilestones({
              owner: context.repo.owner,
              repo: context.repo.repo
            });

            const milestone = milestones.find(m => m.title === milestoneTitle);
            if (!milestone) {
              throw new Error(`âŒ Milestone '${milestoneTitle}' not found. Please create it on GitHub first.`);
            }

            for (const issue of issues) {
              const response = await github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: issue.title,
                body: issue.body,
                labels: issue.labels || [],
                assignees,
                milestone: milestone.number
              });

              console.log(`âœ… Created: ${response.data.title} â€” ${response.data.html_url}`);
            }
